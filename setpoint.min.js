/* by Oleg Meshaev (vk.com/dayll) */ (function(g){var E=true,D=g(window).width(),l=g(window).height(),v=screen.width,A=screen.height,a,x,j,C,d,z,u,p,B,k;var y=[];var e={};window.S=e;e.ua=navigator.userAgent.toLowerCase();var w=navigator.userAgent.toLowerCase();var r={head:"html",body:"body",resize_delay:10,respond_delay:200,smart_resize:false,smart_resize_speed:200,w_step_on:true,w_step_class:"w-xs w-xs w-sm w-md w-lg",w_step_size:"478 768 992 1200 1980",w_max_on:true,w_max_class:"w-max478 w-max767 w-max992",w_max_size:"478 767 992",w_min_on:true,w_min_class:"w-min768 w-min992",w_min_size:"768 992",h_step_on:false,h_step_class:"h-min h-xs h-sm h-md h-max",h_step_size:"240 478 768 992 1200",S_Webmaster:false,S_start_view:false,S_timers:false,landscape:"land",portriet:"port",blackberry:"blackberry",iemobile:"winphone",firefox:"ffox",windows:"windows",macos:"macos",px_:"_",ratio_prefix:"r"};if(typeof console=="undefined"){console={};g(document).ready(function(){g("body").prepend('<div class="setpoint-con_log">console.log:<br /><div class="con_log"></div></div>');console.log=function(f){g(".setpoint-con_log .con_log").append("<p>"+f+"</p>");return}})}var b=function(f){console.log(f);return};var t={instance:null,GetBrowser:function(){if(w.search(/chrome/)!=-1){return"chrome"}if(w.search(/webkit/)!=-1){return"webkit"}if(w.search(/opera/)!=-1){return"opera"}if(w.search(/ie 6/)!=-1){return"ie ie6 ie6-7"}if(w.search(/ie 7/)!=-1){return"ie ie7 ie6-7"}if(w.search(/ie 8/)!=-1){return"ie ie8"}var G="\v"=="v";if(G){return"ie ie6-8"}if(w.search(/msie/)!=-1){return"ie ie9plus"}var F=(function f(){})[-6]=="x";if(F){return"fox2"}if(w.search(/safari/)!=-1){return"safari"}if(w.search(/firefox/)!=-1){return r.firefox}if(w.search(/mozilla/)!=-1){return r.firefox}},PixelRatio:function(){var G=1;if(window.devicePixelRatio){G=window.devicePixelRatio}else{if(screen.deviceXDPI){G=screen.deviceXDPI/screen.logicalXDPI}}G=G.toFixed(1);var F=["0.1","0.2","0.3","0.4","0.5","0.6","0.7","0.8","0.9","1.0","1.1","1.2","1.3","1.4","1.5","1.6","1.7","1.8","1.9","2","2.1","2.2","2.3","2.4","2.5","2.6","2.7","2.8","2.9","3.0"];for(pi=0;pi<F.length;pi++){if(G==F[pi]){var f;if(F[pi]=="1.0"){f="1"}else{if(F[pi]=="2.0"){f="2"}else{if(F[pi]=="3.0"){f="3"}else{f=F[pi]}}}f=f.replace(".",r.px_);return"px"+f;break}}},dpi:function(){if(screen.logicalXDPI){return"dpi"+screen.logicalXDPI}else{if(screen.deviceXDPI){return"dpi"+screen.deviceXDPI}else{var f=[96,105,115,120,125,135,144,154,163,173,182,192,202,211,221,230,240,250,259,267,278,288];for(di=0;di<f.length;di++){if(window.matchMedia("screen and (min-resolution: "+f[di]+"dpi)").matches){return"dpi"+f[di];break}}}}},GetDevice:function(){if(/android|applewebkit|webos|iphone|ipod|blackberry|bb10|rim|iemobile|mobile|phone|opera mini/i.test(w)){return"mobile"}else{if(/touch|ipad|tablet/i.test(w)){return"tablet"}else{if(/googletv|viera|smarttv|internet.tv|netcast|nettv|appletv|boxee|kylo|roku|dlnadoc|roku|pov_tv|hbbtv|ce-html/i.test(w)){return"TV"}else{return"desktop"}}}},GetDeviceType:function(){if(w.search(/iphone/)!=-1){return"ios iphone"}if(w.search(/ipod/)!=-1){return"ios ipod"}if(w.search(/ipad/)!=-1){return"ios ipad"}if(w.search(/android/)!=-1){return"android"}if(w.search(/blackberry/)!=-1){return r.blackberry}if(w.search(/bb10/)!=-1){return r.blackberry}if(w.search(/iemobile/)!=-1){return r.iemobile}if(w.search(/windows/)!=-1){return r.windows}if(w.search(/mac os/)!=-1){return r.macos}if(w.search(/linux/)!=-1){return"linux"}if(w.search(/freebsd/)!=-1){return"freebsd"}},Mratio:function(){var f;ratio_prefix=r.ratio_prefix;d=screen.width;z=screen.height;u=d/z;u=u.toFixed(1);if(u==1.2){p="5:4";f=ratio_prefix+"4x3"}else{if(u==1.3){p="4:3";f=ratio_prefix+"4x3"}else{if(u==1.5){p="3:2";f=ratio_prefix+"3x2"}else{if(u==1.6){p="8:5";f=ratio_prefix+"8x5"}else{if(u==1.7){p="16:9";f=ratio_prefix+"16x9"}else{if(u==1.8){p="16:9";f=ratio_prefix+"16x9"}else{p=ratio_prefix+""+u}}}}}}if(r.S_Webmaster){g(".setpoint-info .sp-aspect").text(p)}return f},isIE:function(F){var f=navigator.userAgent.toLowerCase();if(F!=""){if(f.indexOf("ie "+ie)!=-1){return true}}else{if(f.indexOf("msie")!=-1){return true}}return false},log:function(f){console.log(f);return},SmartResize:function(F,G){y.push(F);var f=r.smart_resize_speed;if(G){f=G}g(window).bind("resize",function(H){window.resizeEvt;g(window).resize(function(){clearTimeout(window.resizeEvt);window.resizeEvt=setTimeout(function(){for(i=0;i<y.length;i++){y[i]()}},f)})})},SetPointActive:function(f){g(window).resize(function(){c()});g(window).bind("resize",function(F){window.resizeSP;g(window).resize(function(){clearTimeout(window.resizeSP);window.resizeSP=setTimeout(function(){c()},f)})})},run:function(f){if(f!=""){r=g.extend(r,f)}o(r)}};window.SP=t;var o=function(L){if(L.w_step_class!=""){var K={};window.w_step=K;K.clas=L.w_step_class.split(" ");K.size=L.w_step_size.split(" ");if(K.clas.length==K.size.length){K.num=K.size.length}else{alert("THIS PASAM: w_step_class != w_step_size")}}if(L.h_step_on&&L.h_step_class!=""){var F={};window.h_step=F;F.clas=L.h_step_class.split(" ");F.size=L.h_step_size.split(" ");if(F.clas.length==F.size.length){F.num=F.size.length}else{alert("THIS PASAM: h_step_class != h_step_size")}}if(L.w_max_on&&L.w_max_class!=""){var f={};window.w_max=f;f.clas=L.w_max_class.split(" ");f.size=L.w_max_size.split(" ");if(f.clas.length==f.size.length){f.num=f.size.length}else{alert("THIS PASAM: w_max_class != w_max_size")}}if(L.w_min_on&&L.w_min_class!=""){var H={};window.w_min=H;H.clas=L.w_min_class.split(" ");H.size=L.w_min_size.split(" ");if(H.clas.length==H.size.length){H.num=H.size.length}else{alert("THIS PASAM: w_min_class != w_min_size")}}var J={};window.S_timer=J;J.start=function(N){var M={};window.S_date=M;M.id=N;M.a=new Date();M.a=M.a.getMilliseconds()};J.finish=function(M){S_date.b=new Date();S_date.b=S_date.b.getMilliseconds();S_date.sum=S_date.b-S_date.a;if(S_date.sum<0){S_date.sum=0}b("Timer: "+M+" = "+S_date.sum+"ms")};if(L.S_Webmaster){g("body").prepend('<p class="setpoint-info setpoint-info-inline"><b>SP</b><b> by inline studio</b><b><i>screen:</i></b><b><span class="ww"></span> x <span class="wh"></span></b><b><span class="w-w"></span> | <span class="w-h"></span></b> | <b><span class="w-max"></span> | <span class="w-min"></span></b><b><span class="prop"><i>html:</i></b><b><span class="dw"></span> x <span class="dh"></span></span></b><b><span class="resolut"><i>resolution:</i></b><b><span class="sw"></span> x <span class="sh"></span></span></b><b><i>aspect ratio:</i></b><b><span class="sp-aspect"></span></b><b><span class="sp-px"></span></b><b><span class="sp-dpi"></span></b><b><i>orientation:</i></b><b><span class="sp-or"></span></b><b><i>browser:</i></b><b><span class="sp-br"></span></b><b><span class="sp-d"></span></b><b><span class="sp-dt"></span></b></p>');var G=g(document).width();var I=g(document).height();if(!L.S_start_view){g(".setpoint-info").hide()}}s(L)};var s=function(G){e.w_class_old="1";e.w_max_old="1";e.w_min_old="1";if(g(G.body).is(".fluid")){if(D<w_step.size[0]){a=w_step.clas[0]}else{a="fluid"}g(G.body).addClass(a);g(window).resize(function(H){D=g(window).width();if(D<w_step.size[0]){a=w_step.clas[0]}else{a="fluid"}g(G.body).removeClass().addClass(a)})}else{c();if(G.smart_resize){g(document).ready(function(){t.SmartResize(c)})}else{t.SetPointActive(G.resize_delay)}}if(G.S_Webmaster){if(G.S_start_view){t.Mratio()}else{g(".setpoint-info").hide()}}e.Device=t.GetDevice();e.DeviceType=t.GetDeviceType();e.Browser=t.GetBrowser();e.Mratio=t.Mratio();e.PixelRatio=t.PixelRatio();e.dpi=t.dpi();if(G.S_Webmaster){g(".setpoint-info .sp-br").text(e.Browser);g(".setpoint-info .sp-dt").text(e.DeviceType);g(".setpoint-info .sp-d").text(e.Device);g(".setpoint-info .sp-px").text(e.PixelRatio);g(".setpoint-info .sp-dpi").text(e.dpi)}g(G.head).addClass(e.Browser);g(G.head).addClass(e.Device);g(G.head).addClass(e.DeviceType);g(G.head).addClass(e.Mratio);g(G.head).addClass(e.PixelRatio);g(G.head).addClass(e.dpi);if(G.S_Webmaster){var F=0;var f=0;g(window).keydown(function(H){if(H.keyCode==90){if(F==0){g("body").addClass("bordme");F=1}else{g("body").removeClass("bordme");F=0}}if(H.keyCode==88){if(f==0){g(".setpoint-info").show();g(".setpoint-info .ww").text(g(window).width());g(".setpoint-info .wh").text(g(window).height());g(".setpoint-info .dw").text(g(document).width());g(".setpoint-info .dh").text(g(document).height());g(".setpoint-info .sw").text(screen.width);g(".setpoint-info .sh").text(screen.height);f=1;g(window).resize(function(I){S_respond()})}else{g(".setpoint-info").hide();f=0}}})}};var n=0;var c=function(f){if(f!=""){r=g.extend(r,f)}if(E){E=false;if(r.S_timers){S_timer.start(1)}D=g(window).width();l=g(window).height();k=l/D;if(k>1){if(g(r.head).hasClass(r.landscape)){g(r.head).removeClass(r.landscape).addClass(r.portriet)}else{g(r.head).addClass(r.portriet)}if(r.S_Webmaster){g(".setpoint-info .sp-or").text(r.portriet)}}else{if(g(r.head).hasClass(r.portriet)){g(r.head).removeClass(r.portriet).addClass(r.landscape)}else{g(r.head).addClass(r.landscape)}if(r.S_Webmaster){g(".setpoint-info .sp-or").text(r.landscape)}}if(r.w_step_on){if(D<=w_step.size[0]){a=w_step.clas[0]}else{for(i=0;i<w_step.num;i++){if(D>w_step.size[i]&&D<=w_step.size[i+1]){a=w_step.clas[i+1];break}}}e.w=a}else{a=""}if(r.w_max_on){if(w_max.num>1){if(D<=w_max.size[0]){w_max_size=w_max.clas[0]}else{w_max_size=w_max.clas[0];for(m=0;m<w_max.num;m++){if(D<=w_max.size[m+1]){w_max_size=w_max.clas[m+1];break}else{w_max_size=""}}}}else{if(D<=w_max.size[0]){w_max_size=w_max.clas[0]}else{w_max_size=false}}}else{w_max_size=""}if(r.w_min_on){if(w_min.num>1){if(D>w_min.size[0]){w_min_size=w_min.clas[0];for(q=0;q<w_min.num;q++){if(D>w_min.size[q+1]){w_min_size+=" "+w_min.clas[q+1];break}else{}}}else{w_min_size=""}}else{if(D>w_min.size[0]){w_min_size=w_min.clas[0]}else{}}}else{w_min_size=""}if(r.h_step_on){if(l<=h_step.size[0]){x=h_step.clas[0]}else{for(h=0;h<h_step.num;h++){if(l>h_step.size[h]&&l<=h_step.size[h+1]){x=h_step.clas[h+1];break}}}e.h=x;if(e.w_class_old=="1"){g(r.body).addClass(a).addClass(x);e.w_class_old=a;e.h_class_old=x}else{if(e.w_class_old!=a){g(r.body).removeClass(e.w_class_old).addClass(a);e.w_class_old=a}if(e.h_class_old!=x){g(r.body).removeClass(e.h_class_old).addClass(x);e.h_class_old=x}}}else{if(e.w_class_old=="1"){g(r.body).addClass(a);e.w_class_old=a}else{if(e.w_class_old!=a){g(r.body).removeClass(e.w_class_old).addClass(a);e.w_class_old=a}}}if(r.w_min_on){if(e.w_min_old=="1"){g(r.body).addClass(w_min_size);e.w_min_old=w_min_size}else{if(e.w_min_old!=w_min_size){g(r.body).removeClass(e.w_min_old).addClass(w_min_size);e.w_min_old=w_min_size}}}if(r.w_max_on){if(e.w_max_old=="1"){g(r.body).addClass(w_max_size);e.w_max_old=w_max_size}else{if(e.w_max_old!=w_max_size){g(r.body).removeClass(e.w_max_old).addClass(w_max_size);e.w_max_old=w_max_size}}}if(r.S_Webmaster){j=g(document).width();C=g(document).height();g(".setpoint-info .w-w").text(a);g(".setpoint-info .w-h").text(x);g(".setpoint-info .ww").text(D);g(".setpoint-info .wh").text(l);g(".setpoint-info .dw").text(j);g(".setpoint-info .dh").text(C);g(".setpoint-info .sw").text(d);g(".setpoint-info .sh").text(z);g(".setpoint-info .w-max").text(w_max_size);g(".setpoint-info .w-min").text(w_min_size)}if(r.S_timers){n++;S_timer.finish("#"+n+" SetPoint()")}setTimeout(function(){E=true},r.respond_delay)}}})(jQuery);
